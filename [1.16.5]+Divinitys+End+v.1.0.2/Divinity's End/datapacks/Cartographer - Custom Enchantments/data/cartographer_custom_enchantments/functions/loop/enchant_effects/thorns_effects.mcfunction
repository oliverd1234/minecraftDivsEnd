scoreboard players set @s t_fire 0
scoreboard players set @s t_frost 0
scoreboard players set @s t_stun 0
scoreboard players set @s t_bleed 0
scoreboard players set @s t_shock 0
scoreboard players set @s t_vuln 0

execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:1}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:2}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:3}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:4}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:5}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:6}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:7}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:8}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:9}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet
execute if entity @s[nbt={Inventory:[{Slot:100b,tag:{Thorns:10}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/feet

execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:1}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:2}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:3}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:4}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:5}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:6}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:7}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:8}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:9}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs
execute if entity @s[nbt={Inventory:[{Slot:101b,tag:{Thorns:10}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/legs

execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:1}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:2}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:3}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:4}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:5}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:6}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:7}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:8}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:9}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest
execute if entity @s[nbt={Inventory:[{Slot:102b,tag:{Thorns:10}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/chest

execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:1}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:2}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:3}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:4}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:5}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:6}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:7}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:8}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:9}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head
execute if entity @s[nbt={Inventory:[{Slot:103b,tag:{Thorns:10}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/head

execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:1}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:2}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:3}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:4}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:5}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:6}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:7}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:8}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:9}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand
execute if entity @s[nbt={Inventory:[{Slot:-106b,tag:{Thorns:10}}]}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/offhand

execute if entity @s[nbt={SelectedItem:{tag:{Thorns:1}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:2}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:3}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:4}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:5}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:6}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:7}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:8}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:9}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand
execute if entity @s[nbt={SelectedItem:{tag:{Thorns:10}}}] run function cartographer_custom_enchantments:loop/enchant_effects/thorns_calc/mainhand

execute if entity @s[scores={t_fire=1}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run data modify entity @s Fire set value 81
execute if entity @s[scores={t_fire=2}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run data modify entity @s Fire set value 161
execute if entity @s[scores={t_fire=3..}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run data modify entity @s Fire set value 221

execute if entity @s[scores={t_frost=1}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run effect give @s slowness 4 0
execute if entity @s[scores={t_frost=2}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run effect give @s slowness 4 1
execute if entity @s[scores={t_frost=3}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run effect give @s slowness 4 2
execute if entity @s[scores={t_frost=4}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run effect give @s slowness 4 3
execute if entity @s[scores={t_frost=5..}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run effect give @s slowness 4 4

function cartographer_core:helper/randomize
scoreboard players operation @s helper_melee = @s random

execute if entity @s[scores={t_stun=1,helper_melee=..10}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players set @s effect_stunned 21
execute if entity @s[scores={t_stun=2,helper_melee=..20}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players set @s effect_stunned 21
execute if entity @s[scores={t_stun=3,helper_melee=..30}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players set @s effect_stunned 21
execute if entity @s[scores={t_stun=4,helper_melee=..40}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players set @s effect_stunned 21
execute if entity @s[scores={t_stun=5..,helper_melee=..50}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players set @s effect_stunned 21

execute if entity @s[scores={t_bleed=1..}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players add @s[scores={effect_bleed=1..}] effect_bleed 11

execute if entity @s[scores={t_bleed=1}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run execute unless entity @s[scores={effect_bleed=1..}] run scoreboard players add @s effect_bleed 3
execute if entity @s[scores={t_bleed=2}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run execute unless entity @s[scores={effect_bleed=1..}] run scoreboard players add @s effect_bleed 5
execute if entity @s[scores={t_bleed=3..}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run execute unless entity @s[scores={effect_bleed=1..}] run scoreboard players add @s effect_bleed 7

execute if entity @s[scores={t_shock=1}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players set @s effect_shocked 3
execute if entity @s[scores={t_shock=2}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players set @s effect_shocked 5
execute if entity @s[scores={t_shock=3..}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run scoreboard players set @s effect_shocked 7

execute if entity @s[scores={t_vuln=1}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run effect give @s bad_omen 4 0
execute if entity @s[scores={t_vuln=2}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run effect give @s bad_omen 4 1
execute if entity @s[scores={t_vuln=3..}] run execute as @e[distance=0.2..5,type=#cartographer_core:hostile] at @s run effect give @s bad_omen 4 2